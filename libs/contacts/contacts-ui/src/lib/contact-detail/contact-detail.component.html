<div class="min-h-full bg-white flex justify-center">
  <div class="w-full max-w-lg">
    @if (contactToEdit()) {
      <contacts-form
        [contact]="contactToEdit()"
        [linkedIdentities]="linkedIdentities()"
        [startInEditMode]="startInEditMode()"
        [readonly]="readonly()"
        (save)="onSave($event)"
        (delete)="onDelete()"
      />

      @if (groupsForContact().length > 0) {
        <div class="mt-6 mx-4 p-4 border rounded-md bg-white">
          <h3 class="font-medium text-gray-700">Member of Groups:</h3>
          <div class="flex flex-wrap gap-2 mt-2">
            <mat-chip-listbox aria-label="Group membership">
              @for (group of groupsForContact(); track group.id.toString()) {
                <mat-chip data-testid="group-chip">
                  {{ group.name }}
                </mat-chip>
              }
            </mat-chip-listbox>
          </div>
        </div>
      }
    } @else {
      <div class="p-8 text-center text-gray-500">
        Loading contact details...
      </div>
    }
  </div>
</div>
