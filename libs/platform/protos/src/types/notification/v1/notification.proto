// Defines the message contract for sending push notification requests.
syntax = "proto3";

package src.types.notification.v1;

option go_package = "github.com/tinywideclouds/gen-platform/go/types/notification/v1;notification_v1";

// WebPushSubscriptionPb models the standard W3C Push Subscription structure.
// This handles the "huge JSON" explicitly instead of stringifying it.
message WebPushSubscriptionPb {
  string endpoint = 1;
  bytes p256dh = 2;
  bytes auth = 3;
}

// 2. The Service-to-Service Request
// No tokens here. The service looks them up.
message NotificationRequestPb {
  string recipient_id = 1; // e.g. "urn:user:123"

  message Content {
    string title = 1;
    string body = 2;
    string sound = 3;
  }
  Content content = 2;

  map<string, string> data_payload = 3;
}

// DeviceTokenPb represents a single push notification token for a user's device.
message DeviceTokenPb {
  // The platform-specific token string from the device.
  string token = 1;
  // The platform identifier, e.g., "ios", "android".
  string platform = 2;
}
