<div>
  @if (active()) {
    <div
      class="my-6 border-2 border-gray-200 rounded-lg overflow-hidden min-h-[300px] bg-black"
    >
      <platform-qr-scanner
        [active]="true"
        (scanSuccess)="scanSuccess.emit($event)"
        (scanError)="scanError.emit($event)"
      ></platform-qr-scanner>
    </div>
  } @else {
    <div
      class="text-center py-12 text-gray-500 bg-gray-50 rounded-lg my-6 border border-gray-100"
    >
      <mat-icon class="text-5xl !w-12 !h-12 mb-4 text-gray-400"
        >qr_code_scanner</mat-icon
      >
      <p>Camera is currently off</p>
    </div>
  }

  <div class="flex flex-col gap-4 items-center mt-4 w-full">
    @if (active()) {
      <button
        type="button"
        mat-button
        color="warn"
        class="w-full"
        (click)="active.set(false)"
      >
        Stop Camera
      </button>
    } @else {
      <button
        type="button"
        mat-flat-button
        color="primary"
        class="w-full py-6"
        (click)="active.set(true)"
      >
        <mat-icon>camera_alt</mat-icon>
        Start Scanning
      </button>
    }

    <div
      class="flex items-center w-full my-2 text-gray-400 text-xs font-medium"
    >
      <div class="flex-1 border-b border-gray-200"></div>
      <span class="px-4">OR</span>
      <div class="flex-1 border-b border-gray-200"></div>
    </div>

    <button
      type="button"
      mat-stroked-button
      class="w-full"
      (click)="switchToDisplay.emit()"
    >
      {{ switchButtonText() }}
    </button>
  </div>
</div>
