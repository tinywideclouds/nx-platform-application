<mat-card class="storage-card">
  <mat-card-header>
    <mat-card-title>Cloud Storage</mat-card-title>
    <mat-card-subtitle>
      Status:
      <span [class]="statusClass()" class="font-medium">{{
        statusText()
      }}</span>
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <p class="description">
      Connect a storage provider to sync your messages and contacts across
      devices. Your data is encrypted and you own the keys.
    </p>

    @if (isBusy()) {
      <div class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
      </div>

    } @else if (isConnected()) {
      <div class="connected-state">
        <div class="provider-info">
          <mat-icon color="primary">cloud_done</mat-icon>
          <span class="provider-name">{{ activeProviderName() }}</span>
        </div>

        <button mat-stroked-button color="warn" (click)="disconnect()">
          Disconnect Storage
        </button>
      </div>

    } @else {
      <div class="actions-list">
        @for (option of options; track option.id) {
          <button
            mat-stroked-button
            (click)="connect(option.id)"
            class="connect-btn"
          >
            <mat-icon>cloud_queue</mat-icon>
            Connect {{ option.name }}
          </button>
        }
      </div>
    }
  </mat-card-content>
</mat-card>
