<div class="space-y-6">
  @if (isWizard()) {
    <div
      class="bg-indigo-50 border border-indigo-100 rounded-lg p-3 mb-4 flex gap-3 animate-fade-in"
    >
      <mat-icon class="text-indigo-500 shrink-0 text-base w-5 h-5 mt-0.5"
        >hub</mat-icon
      >
      <div class="text-xs text-indigo-900 leading-relaxed">
        <strong>Device Graph:</strong> You are currently using
        <strong>this device only</strong>. Linking a laptop or tablet allows you
        to access your chat history from anywhere.
      </div>
    </div>
  }

  <div
    class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"
  >
    <div class="p-6 flex items-start gap-4">
      <div
        class="h-12 w-12 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center shrink-0"
      >
        <mat-icon class="scale-125">devices</mat-icon>
      </div>
      <div class="flex-grow">
        <h3 class="font-bold text-gray-900 m-0">Link a New Device</h3>
        <p class="text-sm text-gray-600 mt-1 mb-4 leading-relaxed">
          Authorize a new phone or computer to access your account. You will
          need to scan a QR code displayed on the new device.
        </p>
        <button mat-flat-button color="primary" (click)="onLinkDevice()">
          <mat-icon>add_to_queue</mat-icon>
          Link Device
        </button>
      </div>
    </div>
  </div>

  <div
    class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"
  >
    <div class="bg-gray-50 px-6 py-3 border-b border-gray-100">
      <h3 class="font-bold text-gray-700 text-sm m-0">Advanced Management</h3>
    </div>

    <mat-nav-list>
      <a
        mat-list-item
        (click)="onClearKeyCache()"
        class="cursor-pointer hover:bg-gray-50 group"
      >
        <mat-icon
          matListItemIcon
          class="text-gray-400 group-hover:text-blue-500"
          >cached</mat-icon
        >
        <span matListItemTitle class="font-medium text-sm text-gray-900"
          >Clear Public Key Cache</span
        >
        <span matListItemLine class="text-xs text-gray-500"
          >Force re-fetch of contact encryption keys</span
        >
      </a>

      <a
        mat-list-item
        (click)="onResetIdentity()"
        class="cursor-pointer hover:bg-red-50 group"
      >
        <mat-icon
          matListItemIcon
          class="text-orange-400 group-hover:text-red-500"
          >vpn_key_alert</mat-icon
        >
        <span
          matListItemTitle
          class="font-medium text-sm text-gray-900 group-hover:text-red-700"
          >Regenerate Identity Keys</span
        >
        <span
          matListItemLine
          class="text-xs text-gray-500 group-hover:text-red-400"
          >Generate new OMEMO keys for this device</span
        >
      </a>
    </mat-nav-list>
  </div>

  <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-6">
    <div class="flex items-center gap-2 mb-4">
      <mat-icon class="text-gray-400">notifications</mat-icon>
      <h3 class="font-bold text-gray-900 text-sm m-0">Push Notifications</h3>
    </div>
    <div
      class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"
    >
      <p class="text-sm text-gray-500 max-w-xl m-0">
        Enable push notifications to verify you can receive messages even when
        the app is running in the background.
      </p>
      <messenger-notification-permission-button />
    </div>
  </div>
</div>
